---
phase: 01-compliance-output-foundations
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - swift-agent-skill/SKILL.md
autonomous: true
must_haves:
  truths:
    - "User can see a standardized refactor response template"
    - "User can see a standardized review response template"
    - "Templates explicitly require constraints and citation allowlist checks"
  artifacts:
    - path: "swift-agent-skill/SKILL.md"
      provides: "Refactor and review response templates"
      contains: ["Refactor Response Template", "Review Response Template"]
  key_links:
    - from: "swift-agent-skill/SKILL.md"
      to: "Constraints section"
      via: "Template checklist"
      pattern: "Constraints"
    - from: "swift-agent-skill/SKILL.md"
      to: "swift-agent-skill/references/sources.md"
      via: "Template citation rule"
      pattern: "references/sources.md"
---

<objective>
Establish standardized refactor and review response templates that enforce constraints and citation allowlist checks.

Purpose: Satisfies CORE-05 and makes outputs consistent for agent usability.
Output: Response template sections added to `swift-agent-skill/SKILL.md`.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-compliance-output-foundations/01-RESEARCH.md
@swift-agent-skill/SKILL.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add standardized refactor response template</name>
  <files>swift-agent-skill/SKILL.md</files>
  <action>
Add a "Refactor Response Template" section in SKILL.md with a fixed structure agents must follow. Include the following ordered headings or numbered steps:
1) Intent + scope (what is being changed and why)
2) Changes (bulleted list with file paths)
3) Behavior preservation checks (what should remain unchanged)
4) Constraints + citation allowlist check (explicitly reference the Constraints section and `references/sources.md`)
5) Next steps (tests or verification, if applicable)
Keep wording concise and avoid architecture mandates or formatting rules.
  </action>
  <verify>Open `swift-agent-skill/SKILL.md` and confirm the Refactor Response Template section exists with the required steps and allowlist reference.</verify>
  <done>Refactor responses are standardized and explicitly require constraints and citation allowlist checks.</done>
</task>

<task type="auto">
  <name>Task 2: Add standardized review response template</name>
  <files>swift-agent-skill/SKILL.md</files>
  <action>
Add a "Review Response Template" section in SKILL.md with a fixed structure agents must follow. Include the following ordered headings or numbered steps:
1) Scope (what was reviewed)
2) Findings (grouped by severity with actionable statements)
3) Evidence (file paths or code locations for each finding)
4) Risks and tradeoffs (what could break or needs attention)
5) Constraints + citation allowlist check (explicitly reference the Constraints section and `references/sources.md`)
6) Next steps (what to fix first or verify)
Keep wording concise and avoid tool-specific instructions.
  </action>
  <verify>Open `swift-agent-skill/SKILL.md` and confirm the Review Response Template section exists with the required steps and allowlist reference.</verify>
  <done>Review responses are standardized and explicitly require constraints and citation allowlist checks.</done>
</task>

</tasks>

<verification>
- `swift-agent-skill/SKILL.md` contains both Refactor and Review response templates.
- Each template references the Constraints section and the citation allowlist file.
</verification>

<success_criteria>
- Agent outputs follow consistent refactor and review formats with explicit constraints and citation checks.
</success_criteria>

<output>
After completion, create `.planning/phases/01-compliance-output-foundations/01-02-SUMMARY.md`.
</output>
