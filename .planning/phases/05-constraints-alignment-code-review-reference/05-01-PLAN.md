---
phase: 05-constraints-alignment-code-review-reference
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - swift-patterns-skill/references/code-review-refactoring.md
autonomous: true

must_haves:
  truths:
    - "Code review/refactor reference enforces constraints via a required link"
    - "Reference contains no tool-specific steps, formatting or linting rules, or UIKit examples"
    - "Quick Decision Guide still points to the compliant code review/refactor reference"
  artifacts:
    - path: "swift-patterns-skill/references/code-review-refactoring.md"
      provides: "Constraints-linked, SwiftUI-focused review/refactor guidance"
      contains: "SKILL.md#constraints"
    - path: "swift-patterns-skill/SKILL.md"
      provides: "Quick Decision Guide link to code review/refactor reference"
      contains: "references/code-review-refactoring.md"
  key_links:
    - from: "swift-patterns-skill/references/code-review-refactoring.md"
      to: "swift-patterns-skill/SKILL.md#constraints"
      via: "Required references block"
      pattern: "SKILL\\.md#constraints"
    - from: "swift-patterns-skill/SKILL.md"
      to: "swift-patterns-skill/references/code-review-refactoring.md"
      via: "Quick Decision Guide entry"
      pattern: "code-review-refactoring\\.md"
---

<objective>
Align the code review/refactor reference with constraints so Quick Decision Guide usage stays safe.

Purpose: Ensure the reference enforces the shared Constraints and removes disallowed content.
Output: A constraints-linked, SwiftUI-focused `code-review-refactoring.md` that avoids tools, formatting rules, and UIKit.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-constraints-alignment-code-review-reference/05-RESEARCH.md

@swift-patterns-skill/SKILL.md
@swift-patterns-skill/references/code-review-refactoring.md
@swift-patterns-skill/references/workflows-review.md
@swift-patterns-skill/references/workflows-refactor.md
@swift-patterns-skill/references/decisions.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add constraints link and remove disallowed guidance</name>
  <files>swift-patterns-skill/references/code-review-refactoring.md</files>
  <action>
Add a required references block near the top that links to `../SKILL.md#constraints`, mirroring the pattern in `workflows-review.md` and `workflows-refactor.md`.
Remove any tool-specific steps (e.g., Instruments/IDE/CLI guidance) and any formatting or linting rules from the workflow sections and checklists.
Keep guidance focused on Swift/SwiftUI review/refactor patterns (state ownership, navigation source of truth, identity stability, data flow, error handling, testability) without introducing architecture mandates or Swift language deep dives.
  </action>
  <verify>rg -n "SKILL\.md#constraints" "swift-patterns-skill/references/code-review-refactoring.md"</verify>
  <done>The reference has a mandatory Constraints link and no tool-specific or formatting-rule guidance.</done>
</task>

<task type="auto">
  <name>Task 2: Replace UIKit or non-SwiftUI examples with SwiftUI-neutral guidance</name>
  <files>swift-patterns-skill/references/code-review-refactoring.md</files>
  <action>
Remove or replace any UIKit-based examples (`UIViewController`, `ViewController`, UIKit patterns) with SwiftUI-neutral examples or concise pseudocode. If examples are retained, ensure they stay within Swift/SwiftUI scope and do not introduce tool instructions or formatting mandates.
Keep example blocks short and focused on code smells or refactoring patterns without prescribing architecture.
  </action>
  <verify>rg -n "UIViewController|ViewController|UIKit|Instruments|formatting|lint" "swift-patterns-skill/references/code-review-refactoring.md"</verify>
  <done>No UIKit or tool/formatting references remain, and examples are SwiftUI-neutral or SwiftUI-focused.</done>
</task>

</tasks>

<verification>
- `swift-patterns-skill/references/code-review-refactoring.md` includes a required Constraints link near the top.
- `rg -n "Instruments|UIViewController|ViewController|UIKit|formatting|lint"` finds no matches in the reference.
- Quick Decision Guide in `swift-patterns-skill/SKILL.md` still links to the reference unchanged.
</verification>

<success_criteria>
- The code review/refactor reference enforces the shared Constraints via explicit link.
- Disallowed tool, formatting, and UIKit content are removed or replaced.
- Quick Decision Guide continues to route to the updated, compliant reference.
</success_criteria>

<output>
After completion, create `.planning/phases/05-constraints-alignment-code-review-reference/05-01-SUMMARY.md`
</output>
