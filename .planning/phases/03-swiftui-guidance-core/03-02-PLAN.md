---
phase: 03-swiftui-guidance-core
plan: 02
type: execute
wave: 2
depends_on:
  - 03-swiftui-guidance-core/03-01
files_modified:
  - swift-expert-skill/references/scrolling.md
  - swift-expert-skill/references/concurrency.md
  - swift-expert-skill/SKILL.md
autonomous: true

must_haves:
  truths:
    - "User can apply ScrollView patterns with safe pagination triggers."
    - "User can tie async work to view lifecycle using .task and cancellation-aware patterns."
    - "User can update UI state safely using @MainActor guidance without deep concurrency patterns."
  artifacts:
    - path: "swift-expert-skill/references/scrolling.md"
      provides: "ScrollView and pagination guidance"
      contains: "Pagination"
    - path: "swift-expert-skill/references/concurrency.md"
      provides: "Lightweight SwiftUI concurrency guidance"
      contains: "SwiftUI"
    - path: "swift-expert-skill/SKILL.md"
      provides: "Links to scrolling and concurrency guidance"
      contains: "Reference Files"
  key_links:
    - from: "swift-expert-skill/SKILL.md"
      to: "swift-expert-skill/references/scrolling.md"
      via: "Reference list"
      pattern: "scrolling\.md"
    - from: "swift-expert-skill/references/scrolling.md"
      to: "swift-expert-skill/references/concurrency.md"
      via: "Async pagination guidance"
      pattern: "swift-concurrency\.md"
---

<objective>
Add scrolling and lightweight SwiftUI concurrency guidance with decision trees and safe async patterns.

Purpose: Ensure SwiftUI scroll and async patterns are consistent, cancellation-aware, and aligned with skill constraints.
Output: New scrolling reference, refreshed SwiftUI-focused concurrency guidance, and SKILL.md wiring.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-swiftui-guidance-core/03-RESEARCH.md
@swift-expert-skill/SKILL.md
@swift-expert-skill/references/concurrency.md
@swift-expert-skill/references/sources.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Author ScrollView and pagination guidance</name>
  <files>swift-expert-skill/references/scrolling.md</files>
  <action>
Create a scrolling reference focused on SwiftUI patterns and safe pagination triggers.

- Include a decision tree for choosing `List` vs `ScrollView` vs `ScrollViewReader`.
- Document safe pagination triggers:
  - Sentinel row or last-item appearance with guard conditions.
  - Avoid triggering multiple loads on rapid scrolling.
  - Prefer `.task(id:)` when loading depends on an identifier or filter.
- Cover common scrolling pitfalls (side effects in row body, overusing `onAppear`, duplicate loads).
- Add a short note linking to `references/concurrency.md` for async pagination patterns.
- Keep guidance practical and free of tool-specific steps.
  </action>
  <verify>Open `swift-expert-skill/references/scrolling.md` and confirm it includes a decision tree and pagination trigger guidance.</verify>
  <done>A scrolling reference exists with safe pagination and lifecycle-aware guidance.</done>
</task>

<task type="auto">
  <name>Task 2: Refocus concurrency guidance on SwiftUI lifecycle and @MainActor</name>
  <files>
swift-expert-skill/references/concurrency.md
swift-expert-skill/SKILL.md
  </files>
  <action>
Align concurrency guidance with SwiftUI constraints by focusing on lightweight patterns.

- In `concurrency.md`:
  - Re-scope to SwiftUI usage: `.task`, `.task(id:)`, cancellation checks, and UI updates on `@MainActor`.
  - Remove or minimize deep concurrency patterns (TaskGroup, actors, complex retry backoff) that are outside the skill scope.
  - Add a compact decision tree for when to use `.task`, `.onAppear`, and `.onChange` for async work.
  - Include examples that show cancellation awareness and `@MainActor` guidance without architecture mandates.

- Update `swift-expert-skill/SKILL.md` to:
  - Add `references/scrolling.md` to the Reference Files list and Quick Decision Guide.
  - Keep concurrency guidance short in SKILL.md and point to `references/concurrency.md` for details.
  </action>
  <verify>
Confirm `concurrency.md` is SwiftUI-focused and that SKILL.md links to `references/scrolling.md`.
  </verify>
  <done>SwiftUI concurrency guidance is lightweight, lifecycle-aware, and wired into SKILL.md.</done>
</task>

</tasks>

<verification>
- `references/scrolling.md` includes pagination trigger guidance and a decision tree.
- `references/concurrency.md` focuses on `.task` and `@MainActor` without deep concurrency patterns.
- `swift-expert-skill/SKILL.md` links to `references/scrolling.md`.
</verification>

<success_criteria>
- Users can apply scrolling and async patterns safely, with clear lifecycle and cancellation guidance.
</success_criteria>

<output>
After completion, create `.planning/phases/03-swiftui-guidance-core/03-02-SUMMARY.md`
</output>
